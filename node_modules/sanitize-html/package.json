{
  "name": "sanitize-html",
  "version": "1.3.0",
  "description": "Clean up user-submitted HTML, preserving whitelisted elements and whitelisted attributes on a per-element basis",
  "main": "index.js",
  "scripts": {
    "test": "mocha test/test.js"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/punkave/sanitize-html.git"
  },
  "keywords": [
    "html",
    "parser",
    "sanitizer",
    "html",
    "sanitizer",
    "apostrophe"
  ],
  "author": {
    "name": "P'unk Avenue LLC"
  },
  "license": "MIT",
  "dependencies": {
    "he": "~0.4.1",
    "htmlparser2": "~3.3.0",
    "lodash": "2.4.x"
  },
  "readme": "# sanitize-html\n\n<a href=\"http://apostrophenow.org/\"><img src=\"https://raw.github.com/punkave/sanitize-html/master/logos/logo-box-madefor.png\" align=\"right\" /></a>\n\n`sanitize-html` provides a simple HTML sanitizer with a clear API.\n\n`sanitize-html` is tolerant. It is well suited for cleaning up HTML fragments such as those created by ckeditor and other rich text editors. It is especially handy for removing unwanted CSS when copying and pasting from Word.\n\n`sanitize-html` allows you to specify the tags you want to permit, and the permitted attributes for each of those tags.\n\nIf a tag is not permitted, the contents of the tag are still kept, except for script and style tags.\n\nThe syntax of poorly closed `p` and `img` elements is cleaned up.\n\n`href` attributes are validated to ensure they only contain `http`, `https`, `ftp` and `mailto` URLs. Relative URLs are also allowed. Ditto for `src` attributes.\n\nHTML comments are not preserved.\n\n## Requirements\n\n`sanitize-html` is intended for use with Node. That's pretty much it. All of its npm dependencies are pure JavaScript. `sanitize-html` is built on the excellent `htmlparser2` module.\n\n## How to use\n\n    npm install sanitize-html\n\n    var sanitizeHtml = require('sanitize-html');\n\n    var dirty = 'some really tacky HTML';\n    var clean = sanitizeHtml(dirty);\n\nThat will allow our default list of allowed tags and attributes through. It's a nice set, but probably not quite what you want. So:\n\n    // Allow only a super restricted set of tags and attributes\n    clean = sanitizeHtml(dirty, {\n      allowedTags: [ 'b', 'i', 'em', 'strong', 'a' ],\n      allowedAttributes: {\n        'a': [ 'href' ]\n      }\n    });\n\nBoom!\n\n\"I like your set but I want to add one more tag. Is there a convenient way?\" Sure:\n\n    clean = sanitizeHtml(dirty, {\n      allowedTags: sanitizeHtml.defaults.allowedTags.concat([ 'img' ])\n    });\n\nIf you do not specify `allowedTags` or `allowedAttributes` our default list is applied. So if you really want an empty list, specify one.\n\n\"What are the default options?\"\n\n    allowedTags: [ 'h3', 'h4', 'h5', 'h6', 'blockquote', 'p', 'a', 'ul', 'ol', 'nl', 'li', 'b', 'i', 'strong', 'em', 'strike', 'code', 'hr', 'br', 'div', 'table', 'thead', 'caption', 'tbody', 'tr', 'th', 'td', 'pre' ],\n    allowedAttributes: {\n      a: [ 'href', 'name', 'target' ],\n      // We don't currently allow img itself by default, but this\n      // would make sense if we did\n      img: [ 'src' ]\n    },\n    // Lots of these won't come up by default because we don't allow them\n    selfClosing: [ 'img', 'br', 'hr', 'area', 'base', 'basefont', 'input', 'link', 'meta' ],\n    // URL schemes we permit\n    allowedSchemes: [ 'http', 'https', 'ftp', 'mailto' ]\n\n### Transformations\n\nWhat if you want to add or change an attribute? What if you want to transform one tag to another? No problem, it's simple!\n\nThe easiest way (will change all `ol` tags to `ul` tags):\n\n    clean = sanitizeHtml(dirty, {\n      transformTags: {\n        'ol': 'ul',\n      }\n    });\n\nThe most advanced usage:\n\n    clean = sanitizeHtml(dirty, {\n      transformTags: {\n        'ol': function(tagName, attribs) {\n            // My own custom magic goes here\n\n            return {\n                tagName: 'ul',\n                attribs: {\n                    class: 'foo'\n                }\n            };\n        }\n      }\n    });\n\nThere is also a helper method which should be enough for simple cases in which you want to change the tag and/or add some attributes:\n\n    clean = sanitizeHtml(dirty, {\n      transformTags: {\n        'ol': sanitizeHtml.simpleTransform('ul', {class: 'foo'}),\n      }\n    });\n\nThe `simpleTransform` helper method has 3 parameters:\n\n    simpleTransform(newTag, newAttributes, shouldMerge)\n\nThe last parameter (`shouldMerge`) is set to `true` by default. When `true`, `simpleTransform` will merge the current attributes with the new ones (`newAttributes`). When `false`, all existing attributes are discarded.\n\n### Filters\n\nYou can provide a filter function to remove unwanted tags. Let's suppose we need to remove empty `a` tags like:\n\n```html\n<a href=\"page.html\"></a>\n```\n\nWe can do that with the following filter:\n\n```javascript\nsanitizeHtml(\n    '<p>This is <a href=\"http://www.linux.org\"></a><br/>Linux</p>',\n    {\n        exclusiveFilter: function(frame) {\n            return frame.tag === 'a' && !frame.text.trim();\n        }\n    }\n);\n```\n\nThe `frame` object supplied to the callback provides the following attributes:\n\n - `tag`: The tag name, i.e. `'img'`.\n - `attribs`: The tag's attributes, i.e. `{ src: \"/path/to/tux.png\" }`.\n - `text`: The text content of the tag.\n - `tagPosition`: The index of the tag's position in the result string.\n\n### Allowed CSS Classes\n\nIf you wish to allow specific CSS classes on a particular element, you can do so with the `allowedClasses` option. Any other CSS classes are discarded.\n\nThis implies that the `class` attribute is allowed on that element.\n\n```javascript\n// Allow only a restricted set of CSS classes and only on the p tag\nclean = sanitizeHtml(dirty, {\n  allowedTags: [ 'p', 'em', 'strong' ],\n  allowedClasses: {\n    'p': [ 'fancy', 'simple' ]\n  }\n});\n```\n\n### Allowed URL schemes\n\nBy default we allow the following URL schemes in cases where `href`, `src`, etc. are allowed:\n\n[ 'http', 'https', 'ftp', 'mailto' ]\n\nYou can override this if you want to:\n\n```javascript\nsanitizeHtml(\n  // teeny-tiny valid transparent GIF in a data URL\n  '<img src=\"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" />',\n  {\n    allowedTags: [ 'img', 'p' ],\n    allowedSchemes: [ 'data', 'http' ]\n  }\n);\n```\n\n## Changelog\n\n1.3.0: `attribs` now available on frames passed to exclusive filter.\n\n1.2.3: fixed another possible XSS attack vector; no definitive exploit was found but it looks possible. [See this issue.](https://github.com/punkave/sanitize-html/pull/20) Thanks to Jim O'Brien.\n\n1.2.2: reject `javascript:` URLs when disguised with an internal comment. This is probably not respected by browsers anyway except when inside an XML data island element, which you almost certainly are not allowing in your `allowedTags`, but we aim to be thorough. Thanks to Jim O'Brien.\n\n1.2.1: fixed crashing bug when presented with bad markup. The bug was in the `exclusiveFilter` mechanism. Unit test added. Thanks to Ilya Kantor for catching it.\n\n1.2.0:\n\n* The `allowedClasses` option now allows you to permit CSS classes in a fine-grained way.\n\n* Text passed to your `exclusiveFilter` function now includes the text of child elements, making it more useful for identifying elements that truly lack any inner text.\n\n1.1.7: use `he` for entity decoding, because it is more actively maintained.\n\n1.1.6: `allowedSchemes` option for those who want to permit `data` URLs and such.\n\n1.1.5: just a packaging thing.\n\n1.1.4: custom exclusion filter.\n\n1.1.3: moved to lodash. 1.1.2 pointed to the wrong version of lodash.\n\n1.1.0: the `transformTags` option was added. Thanks to [kl3ryk](https://github.com/kl3ryk).\n\n1.0.3: fixed several more javascript URL attack vectors after [studying the XSS filter evasion cheat sheet](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet) to better understand my enemy. Whitespace characters (codes from 0 to 32), which browsers ignore in URLs in certain cases allowing the \"javascript\" scheme to be snuck in, are now stripped out when checking for naughty URLs. Thanks again to [pinpickle](https://github.com/pinpickle).\n\n1.0.2: fixed a javascript URL attack vector. naughtyHref must entity-decode URLs and also check for mixed-case scheme names. Thanks to [pinpickle](https://github.com/pinpickle).\n\n1.0.1: Doc tweaks.\n\n1.0.0: If the style tag is disallowed, then its content should be dumped, so that it doesn't appear as text. We were already doing this for script tags, however in both cases the content is now preserved if the tag is explicitly allowed.\n\nWe're rocking our tests and have been working great in production for months, so: declared 1.0.0 stable.\n\n0.1.3: do not double-escape entities in attributes or text. Turns out the \"text\" provided by htmlparser2 is already escaped.\n\n0.1.2: packaging error meant it wouldn't install properly.\n\n0.1.1: discard the text of script tags.\n\n0.1.0: initial release.\n\n## About P'unk Avenue and Apostrophe\n\n`sanitize-html` was created at [P'unk Avenue](http://punkave.com) for use in Apostrophe, an open-source content management system built on node.js. If you like `sanitize-html` you should definitely [check out apostrophenow.org](http://apostrophenow.org). Also be sure to visit us on [github](http://github.com/punkave).\n\n## Support\n\nFeel free to open issues on [github](http://github.com/punkave/sanitize-html).\n\n<a href=\"http://punkave.com/\"><img src=\"https://raw.github.com/punkave/sanitize-html/master/logos/logo-box-builtby.png\" /></a>\n\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/punkave/sanitize-html/issues"
  },
  "homepage": "https://github.com/punkave/sanitize-html",
  "_id": "sanitize-html@1.3.0",
  "dist": {
    "shasum": "2caf96d12c7e9b8decc382f9ac544a94d92e641c"
  },
  "_from": "sanitize-html@",
  "_resolved": "https://registry.npmjs.org/sanitize-html/-/sanitize-html-1.3.0.tgz"
}
