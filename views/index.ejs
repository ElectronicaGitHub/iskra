<%- layout('base.ejs') %>
<% block('title', 'Главная страница') -%>
<script src="/javascripts/utils.js"></script>
<script src="/javascripts/index_page.js"></script>
<div ng-controller="Index" ng-init="init()">	

	<div class="feed">
		<div ng-repeat="block in feed_blocks"
			 class="block">
			<div ng-repeat="element in block.feed_elements"
				 ng-class="{ s11 : element.size == 1, s21 : element.size == 2 , s22 : element.size == 4}">
				 <div class="inner_container">
				 	<div class="img">
				 		<div class='news_title'>
					 		<p>{{ element.title }}</p>
				 		</div>
				 	</div>
				 	<div class="description">
				 		<p>{{ element.description }}</p>
				 	</div>
				 </div>
			</div>
		</div>
	</div>
</div>
<style>
	div.block {
		position: relative;
		z-index: 1;
		width: 50%;
		float: left;
		margin-bottom: 10px;
		height: 400px;
	}
	div.s11, div.s21, div.s22 {
		padding: 10px;
		float: left;
	}
	div.s11, div.s21 {
		height: 200px;
	}
	div.s11 {
		width: 50%;
	}
	div.s21 {
		width: 100%;
	}
	div.s22 {
		width: 100%;
		height: 400px;
	}
	p {
		margin: 0;
		display: table-cell;
		vertical-align: middle;
		text-align: center;
	}
	div.inner_container {
		position: relative;
		width: 100%;
		height: 100%;
		background-color: lightblue;
		overflow: hidden;
	}
	div.img {
		right:0;
		background: url(http://www.extremetech.com/wp-content/uploads/2014/07/cassini-1.jpg) no-repeat center center;
		background-size: cover;
		height: 100%;
		width: 100%;
	}
	div.description {
		position: absolute;
		z-index:1;
		display: table;
		height:100%;
		top: 0;
		width:100%;
		-webkit-transform: translateX(-100%);
   			-moz-transform: translateX(-100%);
        		transform: translateX(-100%);
		-webkit-transition: all .4s linear;
		    -moz-transition: all .4s linear;
		        transition: all .4s linear;
	}
	div.s11 .inner_container .description p, 
	div.s22 .inner_container .description p {
		position: absolute;
		bottom:0;
		left: 0;
		right: 0;
		margin: 0;
		background-color: white;
	}
	div.news_title {
		display: table;
		height: 100%;
		width: 100%;
	}
	.s21 .inner_container .img .news_title{
		margin: 0;
		float: right;
		width: 100%;
	}
	.s22 .inner_container .img .news_title{
	}
	div.news_title p {
		display: table-cell;
		text-align: center;
		vertical-align: middle;
		padding: 20px;
		font-size: 26px;
		color: #21C7C2;
	}
	div.s21 .inner_container .description {
		height: 100%;
		max-width:30%;
		background-color: white;
		display: table;
	}
	div.s21 .inner_container .description p{
		display: table-cell;
		vertical-align: middle;
		text-align: center;
		position: absolute;
	}
	.inner_container:hover .description{
		-webkit-transform: translateX(0);
   			-moz-transform: translateX(0);
        		transform: translateX(0);
	}
	.transitioner {
		-webkit-transition: all .4s;
		-moz-transition: all .4s;
		transition: all .4s;
		
	}
</style>
